{% extends "base_dashboard.html" %}

{% block page_title %}Ù…Ø¬Ù…ÙˆØ¹Ø§ØªÙŠ - Ø´Ù„Ø¨ÙŠ ÙÙŠØ±Ø³{% endblock %}

{% block dashboard_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/teacher.css') }}">
{% endblock %}

{% block sidebar_nav %}
<a href="{{ url_for('teacher.dashboard') }}" class="sidebar-link">
    <span class="sidebar-icon">ğŸ </span>
    <span>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
</a>
<a href="{{ url_for('teacher.groups') }}" class="sidebar-link active">
    <span class="sidebar-icon">ğŸ‘¥</span>
    <span>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª</span>
</a>
<a href="{{ url_for('teacher.sessions') }}" class="sidebar-link">
    <span class="sidebar-icon">ğŸ“…</span>
    <span>Ø§Ù„Ø¬Ù„Ø³Ø§Øª</span>
</a>
<a href="{{ url_for('teacher.timetable') }}" class="sidebar-link">
    <span class="sidebar-icon">ğŸ—“</span>
    <span>Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠ</span>
</a>
<a href="{{ url_for('teacher.homework') }}" class="sidebar-link">
    <span class="sidebar-icon">ğŸ“</span>
    <span>Ø§Ù„ÙˆØ§Ø¬Ø¨Ø§Øª</span>
</a>
{% endblock %}

{% block topbar_title %}Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª{% endblock %}

{% block content %}
<!-- Stats Overview -->
<div class="stats-grid">
    <div class="card stat-card">
        <div class="stat-icon" style="background: var(--sv-purple-glow); color: var(--sv-purple);">ğŸ‘¥</div>
        <div>
            <div class="stat-value">{{ groups|length }}</div>
            <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª</div>
        </div>
    </div>
    <div class="card stat-card">
        <div class="stat-icon" style="background: var(--success-light); color: var(--success);">âœ…</div>
        <div>
            <div class="stat-value">{{ groups|selectattr('is_active')|list|length }}</div>
            <div class="stat-label">Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ù†Ø´Ø·Ø©</div>
        </div>
    </div>
    <div class="card stat-card">
        <div class="stat-icon" style="background: var(--sv-orange-glow); color: var(--sv-orange);">ğŸ“</div>
        <div>
            <div class="stat-value">{{ groups|sum(attribute='student_count') }}</div>
            <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø§Ø¨</div>
        </div>
    </div>
</div>

<!-- Groups List -->
<div class="card">
    <div class="card-header">
        <h2 class="card-title">Ù…Ø¬Ù…ÙˆØ¹Ø§ØªÙŠ</h2>
    </div>

    {% if groups %}
    <div class="table-wrapper">
        <table class="table">
            <thead>
                <tr>
                    <th>Ø§Ø³Ù… Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©</th>
                    <th>Ø§Ù„Ù…Ø³Ø§Ø±</th>
                    <th>Ø§Ù„Ù…Ø³ØªÙˆÙ‰</th>
                    <th>Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø§Ø¨</th>
                    <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                    <th>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                </tr>
            </thead>
            <tbody>
                {% for group in groups %}
                <tr>
                    <td>
                        <a href="{{ url_for('teacher.group_detail', group_id=group.id) }}" style="font-weight: 700; color: var(--sv-purple); text-decoration: none;">
                            {{ group.name }}
                        </a>
                    </td>
                    <td>{{ group.track_id|default('--', true) }}</td>
                    <td>{{ group.level_id|default('--', true) }}</td>
                    <td>
                        <span class="badge badge-purple">{{ group.student_count }} / {{ group.max_students|default(12) }}</span>
                    </td>
                    <td>
                        {% if group.is_active %}
                            <span class="badge badge-success">Ù†Ø´Ø·Ø©</span>
                        {% else %}
                            <span class="badge badge-danger">ØºÙŠØ± Ù†Ø´Ø·Ø©</span>
                        {% endif %}
                    </td>
                    <td>
                        <a href="{{ url_for('teacher.group_detail', group_id=group.id) }}" class="btn btn-sm btn-primary">
                            Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„
                        </a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <div class="empty-state">
        <div class="empty-state-icon">ğŸ‘¥</div>
        <div class="empty-state-text">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹</div>
        <p class="text-muted text-sm">Ø³ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ù…Ù† Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</p>
    </div>
    {% endif %}
</div>
{% endblock %}
