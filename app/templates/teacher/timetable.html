{% extends "base_dashboard.html" %}

{% block page_title %}Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠ - Ø´Ù„Ø¨ÙŠ ÙÙŠØ±Ø³{% endblock %}

{% block dashboard_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/teacher.css') }}">
{% endblock %}

{% block sidebar_nav %}
<a href="{{ url_for('teacher.dashboard') }}" class="sidebar-link">
    <span class="sidebar-icon">ğŸ </span>
    <span>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
</a>
<a href="{{ url_for('teacher.groups') }}" class="sidebar-link">
    <span class="sidebar-icon">ğŸ‘¥</span>
    <span>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª</span>
</a>
<a href="{{ url_for('teacher.sessions') }}" class="sidebar-link">
    <span class="sidebar-icon">ğŸ“…</span>
    <span>Ø§Ù„Ø¬Ù„Ø³Ø§Øª</span>
</a>
<a href="{{ url_for('teacher.timetable') }}" class="sidebar-link active">
    <span class="sidebar-icon">ğŸ—“</span>
    <span>Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠ</span>
</a>
<a href="{{ url_for('teacher.homework') }}" class="sidebar-link">
    <span class="sidebar-icon">ğŸ“</span>
    <span>Ø§Ù„ÙˆØ§Ø¬Ø¨Ø§Øª</span>
</a>
{% endblock %}

{% block topbar_title %}Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠ{% endblock %}

{% block content %}
<!-- Week Navigation -->
<div class="timetable-week-nav">
    <a href="{{ url_for('teacher.timetable', week_offset=week_offset - 1) }}" class="btn btn-ghost btn-sm">
        Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ù‚Ø§Ø¯Ù… â†’
    </a>
    <div class="timetable-week-label">
        <span>{{ week_label }}</span>
        {% if week_offset != 0 %}
        <a href="{{ url_for('teacher.timetable') }}" class="btn btn-ghost btn-sm" style="font-size: var(--text-xs);">Ø§Ù„ÙŠÙˆÙ…</a>
        {% endif %}
    </div>
    <a href="{{ url_for('teacher.timetable', week_offset=week_offset + 1) }}" class="btn btn-ghost btn-sm">
        â† Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø³Ø§Ø¨Ù‚
    </a>
</div>

<!-- Day Cards Grid -->
<div class="timetable-grid">
    {% for day in days %}
    <div class="day-card {{ 'today' if day.is_today }}">
        <div class="day-card-header {{ 'today' if day.is_today }}">
            <span class="day-name">{{ day.name }}</span>
            <span class="day-date">{{ day.date.strftime('%m/%d') }}</span>
        </div>
        <div class="day-card-body">
            {% if day.sessions %}
                {% for s in day.sessions %}
                <a href="{{ url_for('teacher.session_detail', session_id=s.id) }}" class="session-mini">
                    <div class="session-mini-time">
                        {{ s.scheduled_at.strftime('%H:%M') if s.scheduled_at else '--:--' }}
                    </div>
                    <div class="session-mini-info">
                        <div class="session-mini-title">{{ s.title }}</div>
                        <div class="session-mini-meta">
                            {% if s.group %}
                            <span class="session-mini-group">{{ s.group.name }}</span>
                            {% endif %}
                            <span class="session-mini-duration">{{ s.duration_minutes|default(60) }}Ø¯</span>
                        </div>
                    </div>
                    <div class="session-mini-status">
                        {% if s.status.value == 'scheduled' %}
                            <span class="badge badge-info">Ù…Ø¬Ø¯ÙˆÙ„Ø©</span>
                        {% elif s.status.value == 'live' %}
                            <span class="badge badge-orange session-live-pulse">Ù…Ø¨Ø§Ø´Ø±Ø©</span>
                        {% elif s.status.value == 'completed' %}
                            <span class="badge badge-success">Ù…ÙƒØªÙ…Ù„Ø©</span>
                        {% elif s.status.value == 'cancelled' %}
                            <span class="badge badge-danger">Ù…Ù„ØºÙŠØ©</span>
                        {% endif %}
                    </div>
                </a>
                {% endfor %}
            {% else %}
                <div class="day-card-empty">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¬Ù„Ø³Ø§Øª</div>
            {% endif %}
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}

{% block dashboard_js %}
<script src="{{ url_for('static', filename='js/teacher.js') }}"></script>
{% endblock %}
