{% extends "base_dashboard.html" %}

{% block topbar_title %}{{ 'ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…ÙˆØ±Ø¯' if resource is defined and resource else 'Ø¥Ø¶Ø§ÙØ© Ù…ÙˆØ±Ø¯ Ø¬Ø¯ÙŠØ¯' }}{% endblock %}

{% block sidebar_nav %}
<a class="sidebar-nav-item" href="{{ url_for('admin.dashboard') }}">ğŸ“Š Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</a>
<a class="sidebar-nav-item" href="{{ url_for('admin.users') }}">ğŸ‘¥ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ†</a>
<a class="sidebar-nav-item" href="{{ url_for('admin.groups') }}">ğŸ“š Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª</a>
<a class="sidebar-nav-item" href="{{ url_for('admin.sessions') }}">ğŸ“ Ø§Ù„Ø¬Ù„Ø³Ø§Øª</a>
<a class="sidebar-nav-item active" href="{{ url_for('admin.resources') }}">ğŸ“ Ø§Ù„Ù…ÙˆØ§Ø±Ø¯</a>
<a class="sidebar-nav-item" href="{{ url_for('curriculum.home') }}">ğŸ“– Ø§Ù„Ù…Ù†Ù‡Ø¬</a>
<a class="sidebar-nav-item" href="{{ url_for('admin.reports') }}">ğŸ“ˆ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</a>
<a class="sidebar-nav-item" href="{{ url_for('admin.settings') }}">âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</a>
{% endblock %}

{% block content %}
<div class="card" style="max-width:600px;">
    <form method="POST" enctype="multipart/form-data">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
        <div class="form-group">
            <label class="form-label">Ø§Ù„Ø§Ø³Ù… (English)</label>
            <input type="text" name="name" class="form-input" value="{{ resource.name if resource is defined and resource else '' }}" dir="ltr" required>
        </div>
        <div class="form-group">
            <label class="form-label">Ø§Ù„Ø§Ø³Ù… (Ø¹Ø±Ø¨ÙŠ)</label>
            <input type="text" name="name_ar" class="form-input" value="{{ resource.name_ar if resource is defined and resource else '' }}" required>
        </div>
        {% if not (resource is defined and resource) %}
        <div class="form-group">
            <label class="form-label">Ø§Ù„Ù†ÙˆØ¹</label>
            <select name="type" class="form-select">
                <option value="slides">Ø´Ø±Ø§Ø¦Ø­ (Slides)</option>
                <option value="code_exercise">ØªÙ…Ø±ÙŠÙ† Ø¨Ø±Ù…Ø¬ÙŠ (Code Exercise)</option>
                <option value="qna">Ø£Ø³Ø¦Ù„Ø© ÙˆØ£Ø¬ÙˆØ¨Ø© (Q&A)</option>
                <option value="whiteboard">Ø³Ø¨ÙˆØ±Ø© (Whiteboard)</option>
            </select>
        </div>
        <div class="form-group">
            <label class="form-label">Ø§Ù„Ù…Ø³Ø§Ø±</label>
            <select name="track_id" class="form-select">
                <option value="">â€” Ø¨Ø¯ÙˆÙ† Ù…Ø³Ø§Ø± â€”</option>
                {% for t in tracks %}
                <option value="{{ t.id }}">{{ t.name_ar }}</option>
                {% endfor %}
            </select>
        </div>
        {% endif %}
        <div class="form-group">
            <label class="form-label">Ø±ÙØ¹ Ù…Ù„Ù</label>
            <input type="file" name="file" class="form-input" accept=".pdf,.doc,.docx,.pptx,.png,.jpg,.jpeg,.gif,.webp">
            <div class="form-hint">PDF, Word, PowerPoint Ø£Ùˆ ØµÙˆØ± (Ø­Ø¯ Ø£Ù‚ØµÙ‰ 50 Ù…ÙŠØ¬Ø§ Ù„Ù„Ø´Ø±Ø§Ø¦Ø­ØŒ 10 Ù…ÙŠØ¬Ø§ Ù„ØºÙŠØ±Ù‡Ø§)</div>
            {% if resource is defined and resource and resource.config_json %}
                {% set config_data = resource.config_json | default('{}', true) %}
                {% if '"file_url"' in config_data %}
                <div style="margin-top: var(--space-sm); padding: var(--space-sm); background: var(--success-light); border-radius: var(--radius-md); font-size: var(--text-sm); color: var(--success);">
                    Ù…Ù„Ù Ù…Ø±ÙÙˆØ¹ Ø­Ø§Ù„ÙŠØ§Ù‹ (Ø³ÙŠØªÙ… Ø§Ø³ØªØ¨Ø¯Ø§Ù„Ù‡ Ø¹Ù†Ø¯ Ø±ÙØ¹ Ù…Ù„Ù Ø¬Ø¯ÙŠØ¯)
                </div>
                {% endif %}
            {% endif %}
        </div>
        <div class="form-group">
            <label class="form-label">Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª (JSON)</label>
            <textarea name="config_json" class="form-textarea" rows="4" dir="ltr" placeholder='{"slides_count": 10}'>{{ resource.config_json if resource is defined and resource and resource.config_json else '' }}</textarea>
        </div>
        <div style="display:flex;gap:var(--space-md);">
            <button type="submit" class="btn btn-primary">{{ 'Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª' if resource is defined and resource else 'Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…ÙˆØ±Ø¯' }}</button>
            <a href="{{ url_for('admin.resources') }}" class="btn btn-outline">Ø¥Ù„ØºØ§Ø¡</a>
        </div>
    </form>
</div>
{% endblock %}
