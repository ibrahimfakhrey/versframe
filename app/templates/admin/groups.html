{% extends "base_dashboard.html" %}

{% block topbar_title %}Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª{% endblock %}

{% block sidebar_nav %}
<a class="sidebar-nav-item" href="{{ url_for('admin.dashboard') }}">ğŸ“Š Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</a>
<a class="sidebar-nav-item" href="{{ url_for('admin.users') }}">ğŸ‘¥ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ†</a>
<a class="sidebar-nav-item active" href="{{ url_for('admin.groups') }}">ğŸ“š Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª</a>
<a class="sidebar-nav-item" href="{{ url_for('admin.sessions') }}">ğŸ“ Ø§Ù„Ø¬Ù„Ø³Ø§Øª</a>
<a class="sidebar-nav-item" href="{{ url_for('admin.resources') }}">ğŸ“ Ø§Ù„Ù…ÙˆØ§Ø±Ø¯</a>
<a class="sidebar-nav-item" href="{{ url_for('curriculum.home') }}">ğŸ“– Ø§Ù„Ù…Ù†Ù‡Ø¬</a>
<a class="sidebar-nav-item" href="{{ url_for('admin.reports') }}">ğŸ“ˆ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</a>
<a class="sidebar-nav-item" href="{{ url_for('admin.settings') }}">âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</a>
{% endblock %}

{% block content %}
<div style="display:flex;justify-content:flex-end;margin-bottom:var(--space-lg);">
    <a href="{{ url_for('admin.group_create') }}" class="btn btn-primary">+ Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø¬Ù…ÙˆØ¹Ø©</a>
</div>

<div class="card">
    <table class="table">
        <thead>
            <tr><th>Ø§Ù„Ø§Ø³Ù…</th><th>Ø§Ù„Ù…Ø³Ø§Ø±</th><th>Ø§Ù„Ù…Ø¹Ù„Ù…</th><th>Ø§Ù„Ø·Ù„Ø§Ø¨</th><th>Ø§Ù„Ø­Ø§Ù„Ø©</th><th>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th></tr>
        </thead>
        <tbody>
            {% for g in items %}
            <tr>
                <td style="font-weight:600;">{{ g.name }}</td>
                <td class="text-sm">{{ g.track.name_ar if g.track else 'â€”' }}</td>
                <td class="text-sm">{{ g.teacher.name_ar if g.teacher else 'â€”' }}</td>
                <td>{{ g.students.count() }} / {{ g.max_students }}</td>
                <td>
                    {% if g.is_active %}
                    <span class="badge" style="background:var(--status-success-bg);color:var(--status-success);">Ù†Ø´Ø·Ø©</span>
                    {% else %}
                    <span class="badge" style="background:var(--status-error-bg);color:var(--status-error);">Ù…Ø¹Ø·Ù„Ø©</span>
                    {% endif %}
                </td>
                <td><a href="{{ url_for('admin.group_edit', group_id=g.id) }}" class="btn btn-ghost btn-sm">ØªØ¹Ø¯ÙŠÙ„</a></td>
            </tr>
            {% else %}
            <tr><td colspan="6" class="text-center text-muted" style="padding:var(--space-xl);">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¬Ù…ÙˆØ¹Ø§Øª</td></tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% if pages > 1 %}
<div class="pagination">
    {% for p in range(1, pages + 1) %}
    <a href="{{ url_for('admin.groups', page=p) }}" class="pagination-item {{ 'active' if p == page else '' }}">{{ p }}</a>
    {% endfor %}
</div>
{% endif %}
{% endblock %}
