{% extends "base_dashboard.html" %}

{% block topbar_title %}{{ 'ุชุนุฏูู ุงููุณุชุฎุฏู' if user is defined and user else 'ุฅุถุงูุฉ ูุณุชุฎุฏู ุฌุฏูุฏ' }}{% endblock %}

{% block sidebar_nav %}
<a class="sidebar-nav-item" href="{{ url_for('admin.dashboard') }}">๐ ููุญุฉ ุงูุชุญูู</a>
<a class="sidebar-nav-item active" href="{{ url_for('admin.users') }}">๐ฅ ุงููุณุชุฎุฏููู</a>
<a class="sidebar-nav-item" href="{{ url_for('admin.groups') }}">๐ ุงููุฌููุนุงุช</a>
<a class="sidebar-nav-item" href="{{ url_for('admin.sessions') }}">๐ ุงูุฌูุณุงุช</a>
<a class="sidebar-nav-item" href="{{ url_for('admin.resources') }}">๐ ุงูููุงุฑุฏ</a>
<a class="sidebar-nav-item" href="{{ url_for('admin.activities') }}">๐ฎ ุงูุฃูุดุทุฉ</a>
<a class="sidebar-nav-item" href="{{ url_for('curriculum.home') }}">๐ ุงููููุฌ</a>
<a class="sidebar-nav-item" href="{{ url_for('admin.reports') }}">๐ ุงูุชูุงุฑูุฑ</a>
<a class="sidebar-nav-item" href="{{ url_for('admin.settings') }}">โ๏ธ ุงูุฅุนุฏุงุฏุงุช</a>
{% endblock %}

{% block content %}
<div class="card" style="max-width:600px;">
    <form method="POST">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

        <div class="form-group">
            <label class="form-label">ุงูุงุณู ุจุงูุนุฑุจูุฉ *</label>
            <input type="text" name="name_ar" class="form-input" value="{{ user.name_ar if user is defined and user else '' }}" required>
        </div>
        <div class="form-group">
            <label class="form-label">ุงูุงุณู ุจุงูุฅูุฌููุฒูุฉ</label>
            <input type="text" name="name_en" class="form-input" value="{{ user.name_en if user is defined and user else '' }}" dir="ltr">
        </div>
        <div class="form-group">
            <label class="form-label">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู *</label>
            <input type="email" name="email" class="form-input" value="{{ user.email if user is defined and user else '' }}" required dir="ltr">
        </div>
        <div class="form-group">
            <label class="form-label">ุฑูู ุงููุงุชู</label>
            <input type="tel" name="phone" class="form-input" value="{{ user.phone if user is defined and user and user.phone else '' }}" dir="ltr">
        </div>
        <div class="form-group">
            <label class="form-label">ุงูุฏูุฑ *</label>
            <select name="role" class="form-select">
                {% set current_role = user.role.value if user is defined and user else 'student' %}
                <option value="student" {{ 'selected' if current_role=='student' }}>ุทุงูุจ</option>
                <option value="teacher" {{ 'selected' if current_role=='teacher' }}>ูุนูู</option>
                <option value="parent" {{ 'selected' if current_role=='parent' }}>ููู ุฃูุฑ</option>
                <option value="assessor" {{ 'selected' if current_role=='assessor' }}>ููููู</option>
                <option value="admin" {{ 'selected' if current_role=='admin' }}>ูุฏูุฑ</option>
            </select>
        </div>
        <div class="form-group">
            <label class="form-label">{{ 'ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ (ุงุชุฑููุง ูุงุฑุบุฉ ูุนุฏู ุงูุชุบููุฑ)' if user is defined and user else 'ูููุฉ ุงููุฑูุฑ *' }}</label>
            <input type="password" name="password" class="form-input" {{ '' if user is defined and user else 'required' }} dir="ltr" minlength="6">
        </div>
        {% if user is defined and user %}
        <div class="form-group">
            <label style="display:flex;align-items:center;gap:var(--space-sm);cursor:pointer;">
                <input type="checkbox" name="is_active" {{ 'checked' if user.is_active }} style="accent-color:var(--sv-purple);">
                <span>ุงูุญุณุงุจ ูุดุท</span>
            </label>
        </div>
        {% endif %}
        <div style="display:flex;gap:var(--space-md);">
            <button type="submit" class="btn btn-primary">{{ 'ุญูุธ ุงูุชุนุฏููุงุช' if user is defined and user else 'ุฅูุดุงุก ุงููุณุชุฎุฏู' }}</button>
            <a href="{{ url_for('admin.users') }}" class="btn btn-outline">ุฅูุบุงุก</a>
        </div>
    </form>
</div>
{% endblock %}
