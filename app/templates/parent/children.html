{% extends "base_dashboard.html" %}

{% block title %}Ø£Ø¨Ù†Ø§Ø¦ÙŠ{% endblock %}
{% block topbar_title %}Ø£Ø¨Ù†Ø§Ø¦ÙŠ{% endblock %}

{% block sidebar_nav %}
<a href="{{ url_for('parent.dashboard') }}" class="sidebar-link">
    <span class="sidebar-icon">ğŸ </span>
    <span>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
</a>
<a href="{{ url_for('parent.children') }}" class="sidebar-link active">
    <span class="sidebar-icon">ğŸ‘¨â€ğŸ‘§â€ğŸ‘¦</span>
    <span>Ø£Ø¨Ù†Ø§Ø¦ÙŠ</span>
</a>
<a href="{{ url_for('parent.messages') }}" class="sidebar-link">
    <span class="sidebar-icon">âœ‰ï¸</span>
    <span>Ø§Ù„Ø±Ø³Ø§Ø¦Ù„</span>
</a>
{% endblock %}

{% block content %}
<div class="page-header">
    <h2 class="page-title">Ø£Ø¨Ù†Ø§Ø¦ÙŠ</h2>
    <p class="page-subtitle">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù…Ø³Ø¬Ù„ÙŠÙ† ÙÙŠ Ø´Ù„Ø¨ÙŠ ÙÙŠØ±Ø³</p>
</div>

{% if children %}
<div class="card">
    <div class="table-wrapper">
        <table class="table">
            <thead>
                <tr>
                    <th>Ø§Ù„Ø·Ø§Ù„Ø¨</th>
                    <th>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</th>
                    <th>ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ³Ø¬ÙŠÙ„</th>
                    <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                    <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                </tr>
            </thead>
            <tbody>
                {% for child in children %}
                <tr>
                    <td>
                        <div style="display: flex; align-items: center; gap: var(--space-sm);">
                            <div class="avatar">
                                {% if child.avatar_url %}
                                <img src="{{ child.avatar_url }}" alt="" style="width:100%;height:100%;border-radius:50%;object-fit:cover;">
                                {% else %}
                                {{ child.name_ar[0] if child.name_ar else '?' }}
                                {% endif %}
                            </div>
                            <div>
                                <div style="font-weight: var(--fw-bold);">{{ child.name_ar }}</div>
                                <div style="font-size: var(--text-xs); color: var(--text-secondary);">{{ child.name_en or '' }}</div>
                            </div>
                        </div>
                    </td>
                    <td style="direction: ltr; text-align: right;">{{ child.email }}</td>
                    <td>{{ child.created_at.strftime('%Y-%m-%d') if child.created_at else '-' }}</td>
                    <td>
                        {% if child.is_active %}
                        <span class="badge badge-success">Ù†Ø´Ø·</span>
                        {% else %}
                        <span class="badge badge-danger">ØºÙŠØ± Ù†Ø´Ø·</span>
                        {% endif %}
                    </td>
                    <td>
                        <div style="display: flex; gap: var(--space-xs);">
                            <a href="{{ url_for('parent.child_detail', child_id=child.id) }}" class="btn btn-sm btn-primary">
                                Ø§Ù„ØªÙØ§ØµÙŠÙ„
                            </a>
                            <a href="{{ url_for('parent.child_reports', child_id=child.id) }}" class="btn btn-sm btn-outline">
                                Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±
                            </a>
                        </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% else %}
<div class="card empty-state">
    <div class="empty-state-icon">ğŸ‘¨â€ğŸ‘§â€ğŸ‘¦</div>
    <div class="empty-state-text">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø£Ø¨Ù†Ø§Ø¡ Ù…Ø³Ø¬Ù„ÙŠÙ† Ø­Ø§Ù„ÙŠØ§</div>
    <p style="color: var(--text-muted); font-size: var(--text-sm);">ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø¥Ø¯Ø§Ø±Ø© Ø´Ù„Ø¨ÙŠ ÙÙŠØ±Ø³ Ù„Ø±Ø¨Ø· Ø­Ø³Ø§Ø¨Ø§Øª Ø£Ø¨Ù†Ø§Ø¦Ùƒ Ø¨Ø­Ø³Ø§Ø¨Ùƒ</p>
</div>
{% endif %}
{% endblock %}
